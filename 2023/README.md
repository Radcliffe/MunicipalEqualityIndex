# Muncipal Equality Index (2023)

This directory contains the data from the Municipal Equality Index for 2023.
The Municipal Equality Index (MEI) is an annual report published by the Human Rights Campaign (HRC) that rates cities on their LGBTQ+ inclusivity. The MEI 2023 rates 506 cities in the United States.

The CSV file `mei-data-2023.csv` contains the following columns:
- `Row Id`: A unique identifier for each row.
- `City Id`: A unique identifier for each city.
- `City`: The name of the city.
- `State`: The state in which the city is located (two-letter postal abbreviation).
- `URL`: The URL of the city's MEI report.
- `Score Id`: A unique identifier for each score component.
- `Category`: The category of the city's MEI report. Possible values are `Non-Discrimination Laws`, `Municipality as Employer`, `Municipal Services`, `Law Enforcement`, and `Leadership on LGBTQ+ Equality`.
- `Criterion`: The criterion within the category.
- `Level of government`: The level of government responsible for the criterion. Possible values are `City`, `County`, and `State`.
- `Orientation/Identity`: Possible values are `Sexual Orientation`, `Gender Identity`, and `NA`.
- `Score`: The city's score for the criterion.

The CSV file `mei-totals-by-municipality-2023.csv` contains the point totals 
(overall and by category) for each city. It contains the following columns:
- `City Id`
- `City`
- `State`
- `Non-Discrimination Laws`: 30 points possible.
- `Municipality as Employer`: 28 points possible.
- `Municipal Services`: 12 points possible.
- `Law Enforcement`: 22 points possible.
- `Leadership on LGBTQ+ Equality`: 8 points possible.
- `Flex Points`: Up to 22 bonus points are available.
- `Total Score`: The total score is capped at 100.

The file `us_states.csv` contains a list of US states and two-letter abbreviations.

The file `template.csv` is used to generate `mei-data-2023.csv`.

The file `cities.csv` lists the 506 cities in the MEI 2023. It is generated by the Python script.

The file `mei_scrape.py` is a Python script that scrapes the MEI 2023 data from the HRC website. It generates the `mei-data-2023.csv` and `mei-totals-by-municipality-2023.csv` files.

# How to run the Python script

The repository contains the output of the Python script. 
It is not necessary to run it yourself unless you want to reproduce the data.
This should not be done lightly, as running the script will send hundreds of 
requests to the HRC web server. To avoid overloading the server, a half-second
delay has been added to each request. Consequently, this script will take several
minutes to complete.

This script was written for Python 3.12, and it requires the `requests` and
`beautifulsoup4` libraries. I recommend running the script in a virtual environment.
Enter the following commands to create and activate a virtual environment and install
the dependencies.

$ python3 -m venv venv
$ source venv/bin/activate
$ python3 -m pip install -r requirements.txt

The command for activating the virtual enviroment depends on your operating system and shell. See https://docs.python.org/3/library/venv.html#how-venvs-work for details.


Enter the following command to run the script. Be patient because it will take several minutes to complete.

$ python3 mei_scrape.py

The script generates three output files:
* `cities.csv`: A list of the 506 cities in the MEI 2023.
* `mei-data-2023.csv`: The data from the MEI 2023.
* `mei-totals-by-municipality-2023.csv`: The point totals for each city.

The script will not overwrite the existing files. If you want to run the script, you must delete or rename the existing files first.
